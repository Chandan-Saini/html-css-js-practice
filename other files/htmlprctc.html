<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>udemy JS practice</title>

    <style>
      .green{
        width: 300px;
        height: 100px;
        margin-top: 30px;
        background-color: green;
      }
      .orange{
        width: 300px;
        height: 100px;
        margin-top: 30px;
        background-color: orangered;
      }
    </style>
  </head>

  <body>
    <h1>
      practice of ES6 JS challenge 8
    </h1>

    <div class="green">
      This is green box
    </div>
 
    <div class="orange">
      This is orange box
    </div>
 
    <script>
       
       class Element{
         constructor(name,buildYear){
           this.name=name
           this.buildYear=buildYear
         }
       }

    class Parks extends Element{
       
      constructor(name,buildYear,area,numTress){
        super(name,buildYear)
        this.numTress=numTress
        this.area=area
      }

       treeDensity(){
        const density= this.numTress/this.area;
        console.log(`${this.name} has a tree density of ${density} tress per sq km`);
      }
    }


     class Street extends Element{
       
      constructor(name,buildYear,length,size=3 ){
        super(name,buildYear)
        this.length=length
        this.size=size
      }

      classifyStreet(){

        var classification= new Map()
        classification.set(1,"tiny")
        classification.set(2,"small")
        classification.set(3,"normal")
        classification.set(4,"big")
        classification.set(5,"huge")
        console.log(`${this.name} build in year ${this.buildYear} and it is of ${classification.get(this.size)} size`);
      }}

     var allpark=[new Parks("Park 1",1991,2,2000),new Parks("Park 2",1910,10,5000),new Parks("Park 3",2010,1.2,500)]

     var allstreet=[new Street("street 1",1994,10),new Street("street 2",2011,20,2),new Street("street 3",2020,30,5)]


    function calAge(arr){
        var sum = arr.reduce((prev,cur,index)=> prev+cur,0)
        return [sum, sum/arr.length]
    }
    
    function reportParks(p){
         console.log("===================================Parks report======================================");
         //density
         allpark.forEach(el => el.treeDensity())
        

         //avg age
         var ages= p.map(el => new Date().getFullYear() - el.buildYear)

        const [totalAge,avgAge]=calAge(ages)
         console.log(`Our ${p.length} has average age of ${avgAge} years`);


         //which parks has more than 1000 trees
         var i= p.map(el=> el.numTress).findIndex(el => el >= 1000)
               
               console.log(`${p[i].name} has more than 1000 trees`);

    }

    function reportStreets(s){
       console.log("=================================Streets report======================================");
    allstreet.forEach(el => el.classifyStreet())

    }

   reportParks(allpark)
   reportStreets(allstreet)

    </script>
  </body>
</html>
